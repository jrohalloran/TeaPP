<!-- Top-level container -->
<div class="app-wrapper">

  <!-- Top bar -->
  <header class="top-bar">
    <div class="top-bar-content">
      <h1>TeaPP Vis</h1>
    </div>
  </header>

  <!-- Main content area -->
  <div class="app-container">

    <!-- Left side: split into top and bottom halves -->
    <div class="left-side">

      <!-- Top Sigma container -->
      <div class="half-container sigma-top">
        <div class="loading-overlay" *ngIf="isTopLoading">
          <div class="spinner"></div>
          <p>Loading Visualisation...</p>
        </div>
        <div id="sigma-top-container" #sigmaContainerTop></div>
      </div>

      <!-- Bottom Sigma container -->
      <div class="half-container sigma-bottom">
        <div class="loading-overlay" *ngIf="isBottomLoading">
          <div class="spinner"></div>
          <p>Loading Visualisation...</p>
        </div>
        <div class="overlay" *ngIf="showBottomOverlay">
          <div class="overlay-content">
            Please select a clone to view...
          </div>
        </div>
        <div id="sigma-bottom-container" #sigmaContainerBottom></div>
      </div>

    </div>

    <!-- Right side panel -->
    <aside class="side-panel">

      <!-- Controls section -->
      <div class="top-half">
        <h2>Controls</h2>
        <button (click)="zoomIn()">Zoom In</button>
        <button (click)="zoomOut()">Zoom Out</button>
      </div>

      <div class='my-legend'>
        <div class='legend-title'>Legend</div>
        <div class='legend-scale'>
          <ul class='legend-labels'>
            <li *ngFor="let item of legendItems">
              <span [ngStyle]="{'background': item.color}"></span>{{ item.label }}
            </li>
          </ul>
        </div>
        </div>
      <div class="search-panel">
          <!-- Search Input -->
          <input
            type="text"
            placeholder="Search..."
            [(ngModel)]="searchTerm"
            (input)="onSearch()"
            class="search-input"
          />

          <!-- Dropdown of matching items -->
          <ul class="dropdown" *ngIf="filteredData.length < 20">
            <li *ngFor="let item of filteredData" (click)="selectItem(item)">{{ item.clone_id }} 
            </li>
          </ul>

          <!-- Optional: show selected item -->
          <div *ngIf="selectedItem" class="selected-item">
            <p>Selected: <strong>{{ selectedItem.clone_id}}</strong> </p>
          </div>
        </div>
              <!-- Stats section -->
      <div class="bottom-half">
        <h3>Statistics</h3>
        <p>Nodes: {{ stats.nodes }}</p>
        <p>Edges: {{ stats.edges }}</p>
      </div>

    </aside>

  </div>

</div>

